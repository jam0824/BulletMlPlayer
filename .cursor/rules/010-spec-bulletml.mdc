---
description: BulletML仕様
alwaysApply: false
---
# 以下BulletMLの仕様です
## <bulletml> - Defines the BulletML's body	
Attribute - type = (none | vertical | horizontal)

Contents - (bullet | action | fire)*

BulletML本体を定義します。

type属性は、この弾幕が縦スクロールシューティング用か、 横スクロールシューティング用かを規定します。

## <bullet> - Defines attributes of a bullet	
Attribute - label = STRING

Contents - direction?, speed?, (action | actionRef)*

@examples
```
<bullet label="downAccel">
<direction>270</direction>
<speed>2</speed>
<action>
<accel>
 <vertical>3</vertical>
 <term>120</term>
</accel>
</action>
</bullet>
```

弾の方向、速度およびアクションを定義します。

ラベル属性でラベル名をつけることができます。 ラベル付けされたbullet要素は、bulletRef要素によって参照されます。

## <action> - Defines the action of bullet	
Attribute - label = STRING

Contents - (repeat | fire | fireRef | changeSpeed | changeDirection | accel | wait | vanish | action | actionRef)*

@examples
```
<action>
<changeSpeed>
 <speed>0</speed>
 <term>60</term>
</changeSpeed>
<wait>60</wait>
<fire><bullet/></fire>
<fire>
 <direction type="absolute">330+$rand*25</direction>
 <bulletRef label="downAccel"/>
</fire>
<vanish/>
</action>
```

弾のアクションを定義します。 ラベル付けされたaction要素は、actionRef要素によって参照されます。

## <fire> - Fires a bullet	
Attribute - label = STRING

Contents - direction?, speed?, (bullet | bulletRef)

@examples
```
<fire>
 <direction type="absolute">270</direction>
 <speed>2</speed>
 <bulletRef label="rocket"/>
</fire>
```

弾を<direction>度方向に速度<speed>で撃ちます。 ラベル付けされたfire要素は、fireRef要素によって参照されます。

## <changeDirection> - Changes the direction of bullet	
Contents - direction, term

弾の方向を<direction>度に<term>フレームかけて曲げます。 1フレームは1/60秒です。

## <changeSpeed> - Changes the speed of bullet	

Contents - speed, term

弾の速度を<speed>に<term>フレームかけて変えます。

## <accel> - Accelerates a bullet	

Contents - horizontal?, vertical?, term

弾を水平方向に<horizontal>、垂直方向に<vertical>、 <term>フレームかけて加速します。

## <wait> - Waits	
Contents - NUMBER

NUMBERフレーム待ちます。

## <vanish> - Vanishes a bullet	
弾を消します。

## <repeat> - Repeats an action	
Contents - times, (action | actionRef)

@examples
```
<repeat>
<times>100</times>
<action>
 <fire>
  <direction type="absolute">220+$rand*100</direction>
  <bulletRef label="backBurst"/>
 </fire>
 <wait>6</wait>
</action>
</repeat>
```

アクションを<times>回繰り返します。

## <direction> - Specifies a direction	
Attribute - type = (aim | absolute | relative | sequence)

Contents - NUMBER

方向を度単位で指定します。

typeが"aim"の場合、自機を狙う方向が0の相対値になります。

typeが"absolute"の場合、NUMBERは絶対値（上方向が0で時計回り）です。

typeが"relative"の場合、NUMBERはこの弾の方向が0の相対値になります。

typeが"sequence"の場合、直前の弾を撃った方向が0の相対値になります。

## <speed> - Specifies a speed	
Attribute - type = (absolute | relative | sequence)

Contents - NUMBER

速度を指定します。

typeが"relative"の場合、 changeSpeed要素内では現在の弾の速度との相対値、 それ以外の要素内ではこの弾の速度との相対値です。

typeが"sequence"の場合、 changeSpeed要素内では弾の速度を連続的に変化させ、 それ以外の要素内では直前の弾の速度との相対値です。

## <horizontal> - Specifies the acceleration in a horizontal line	
Attribute - type = (absolute | relative | sequence)

Contents - NUMBER

水平方向の弾の加速度を指定します。

typeが"relative"の場合、現在の弾の速度との相対値です。 typeが"sequence"の場合、加速度を連続的に変化させます。

## <vertical> - Specifies the acceleration in a vertical line	
Attribute - type = (absolute | relative | sequence)

Contents - NUMBER

垂直方向の弾の加速度を指定します。

typeが"sequence"の場合、現在の弾の速度との相対値です。 typeが"sequence"の場合、加速度を連続的に変化させます。

## <term> - Specifies a term	
Contents - NUMBER

期間を指定します。

## <times> - Specifies the number of times	
Contents - NUMBER

繰り返し回数を指定します。

## <bulletRef> - Refers to the bullet	
Attribute - label = STRING

Contents - param*

ラベル付けされたbullet要素を参照します。 この要素は同名のラベルでラベル付けされたbullet要素と同じに扱われます。

参照されたbullet要素内の変数（$1, $2, $3, ...）は、 <param>要素に指定された数値に置き換えられます。 （最初に出現したparam要素が$1に、次に出現したparam要素が$2に、...）

## <actionRef> - Refers to the action	
Attribute - label = STRING

Contents - param*

ラベル付けされたaction要素を参照します。 この要素は同名のラベルでラベル付けされたaction要素と同じに扱われます。

参照されたaction要素内の変数は、<param>要素に指定された数値に 置き換えられます。

## <fireRef> - Refers to the fire action	
Attribute - label = STRING

Contents - param*

ラベル付けされたfire要素を参照します。 この要素は同名のラベルでラベル付けされたfire要素と同じに扱われます。

参照されたfire要素内の変数は、<param>要素に指定された数値に 置き換えられます。

## <param> - Specifies the parameter	
Contents - NUMBER

パラメタを指定します。

STRING - any string	
ラベル用文字列です。

NUMBER - expression	
Examples

35
360/16
0.7 + 0.9*$rand
180-$rank*20
(2+$1)*0.3
数値を指定するための式です。

四則演算と剰余算、括弧、変数（パラメタ用に$1, $2, $3...、 乱数（0から1までの値）用に$rand、難易度（0から1までの値）用に$rank） が使えます。

# BulletML RELAX ver. 0.21
<?xml version="1.0"?>
<!DOCTYPE module SYSTEM "relaxCore.dtd">

<!--
  bulletml.rlx

  Copyright 2001 Kenta Cho. All rights reserved. 
-->

<module 
 moduleVersion="0.21"
 relaxCoreVersion="1.0"
 targetNamespace="http://www.asahi-net.or.jp/~cs8k-cyu/bulletml"
 xmlns="http://www.xml.gr.jp/xmlns/relaxCore">

<interface>
<export label="bulletml"/>
</interface>


<elementRule role="bulletml">
<choice occurs="*">
<ref label="action"/>
<ref label="bullet"/>
<ref label="fire"/>
</choice>
</elementRule>

<hedgeRule label="bulletElm">
<choice>
<ref label="bullet"/>
<ref label="bulletRef"/>
</choice>
</hedgeRule>

<elementRule role="bulletRef">
<choice occurs="*">
<ref label="param"/>
</choice>
</elementRule>

<elementRule role="param" type="string"/>

<elementRule role="bullet">
<sequence>
<ref label="direction" occurs="?"/>
<ref label="speed" occurs="?"/>
<hedgeRef label="actionElm" occurs="*"/>
</sequence>
</elementRule>

<elementRule role="direction" type="string"/>

<elementRule role="speed" type="string"/>

<hedgeRule label="actionElm">
<choice>
<ref label="action"/>
<ref label="actionRef"/>
</choice>
</hedgeRule>

<elementRule role="actionRef">
<choice occurs="*">
<ref label="param"/>
</choice>
</elementRule>

<elementRule role="action">
<choice occurs="*">
<ref label="repeat"/>
<hedgeRef label="fireElm"/>
<ref label="changeSpeed"/>
<ref label="changeDirection"/>
<ref label="accel"/>
<ref label="wait"/>
<ref label="vanish"/>
<hedgeRef label="actionElm"/>
</choice>
</elementRule>

<elementRule role="repeat">
<sequence>
<ref label="times"/>
<hedgeRef label="actionElm"/>
</sequence>
</elementRule>

<elementRule role="times" type="string"/>

<hedgeRule label="fireElm">
<choice>
<ref label="fire"/>
<ref label="fireRef"/>
</choice>
</hedgeRule>

<elementRule role="fireRef">
<choice occurs="*">
<ref label="param"/>
</choice>
</elementRule>

<elementRule role="fire">
<sequence>
<ref label="direction" occurs="?"/>
<ref label="speed" occurs="?"/>
<hedgeRef label="bulletElm"/>
</sequence>
</elementRule>

<elementRule role="changeSpeed">
<sequence>
<ref label="speed"/>
<ref label="term"/>
</sequence>
</elementRule>

<elementRule role="changeDirection">
<sequence>
<ref label="direction"/>
<ref label="term"/>
</sequence>
</elementRule>

<elementRule role="accel">
<sequence>
<ref label="horizontal" occurs="?"/>
<ref label="vertical" occurs="?"/>
<ref label="term"/>
</sequence>
</elementRule>

<elementRule role="horizontal" type="string"/>

<elementRule role="vertical" type="string"/>

<elementRule role="term" type="string"/>

<elementRule role="wait" type="string"/>

<elementRule role="vanish" type="emptyString"/>


<tag name="bulletml">
<attribute name="xmlns" type="string"/>
<attribute name="type" type="string">
<enumeration value="none"/>
<enumeration value="vertical"/>
<enumeration value="horizontal"/>
</attribute>
</tag>

<tag name="bullet">
<attribute name="label" type="string"/>
</tag>

<tag name="bulletRef">
<attribute name="label" required="true" type="string"/>
</tag>

<tag name="direction">
<attribute name="type" type="string">
<enumeration value="aim"/>
<enumeration value="absolute"/>
<enumeration value="relative"/>
<enumeration value="sequence"/>
</attribute>
</tag>

<tag name="speed">
<attribute name="type" type="string">
<enumeration value="absolute"/>
<enumeration value="relative"/>
<enumeration value="sequence"/>
</attribute>
</tag>

<tag name="action">
<attribute name="label" type="string"/>
</tag>

<tag name="actionRef">
<attribute name="label" required="true" type="string"/>
</tag>

<tag name="fire">
<attribute name="label" type="string"/>
</tag>

<tag name="fireRef">
<attribute name="label" required="true" type="string"/>
</tag>

<tag name="repeat"/>
<tag name="changeSpeed"/>
<tag name="changeDirection"/>
<tag name="accel"/>
<tag name="wait"/>
<tag name="vanish"/>

<tag name="horizontal">
<attribute name="type" type="string">
<enumeration value="absolute"/>
<enumeration value="relative"/>
<enumeration value="sequence"/>
</attribute>
</tag>

<tag name="vertical">
<attribute name="type" type="string">
<enumeration value="absolute"/>
<enumeration value="relative"/>
<enumeration value="sequence"/>
</attribute>
</tag>

<tag name="term"/>

<tag name="times"/>

<tag name="param"/>

</module>

# BulletML DTD ver. 0.21
<!-- Generated by Relaxer 0.13 -->
<!-- Sun Jun 03 09:44:38 JST 2001 -->

<!ELEMENT vertical (#PCDATA)>
<!ATTLIST vertical type (absolute|relative|sequence) "absolute">

<!ELEMENT fireRef (param*)>
<!ATTLIST fireRef label CDATA #REQUIRED>

<!ELEMENT changeDirection (direction, term)>

<!ELEMENT bulletml (bullet | fire | action)*>
<!ATTLIST bulletml xmlns CDATA #IMPLIED>
<!ATTLIST bulletml type (none|vertical|horizontal) "none">

<!ELEMENT param (#PCDATA)>

<!ELEMENT actionRef (param*)>
<!ATTLIST actionRef label CDATA #REQUIRED>

<!ELEMENT repeat (times, (action | actionRef))>

<!ELEMENT accel (horizontal?, vertical?, term)>

<!ELEMENT times (#PCDATA)>

<!ELEMENT term (#PCDATA)>

<!ELEMENT wait (#PCDATA)>

<!ELEMENT action (changeDirection | accel | vanish | changeSpeed | repeat | wait | (fire | fireRef) | (action | actionRef))*>
<!ATTLIST action label CDATA #IMPLIED>

<!ELEMENT vanish (#PCDATA)>

<!ELEMENT speed (#PCDATA)>
<!ATTLIST speed type (absolute|relative|sequence) "absolute">

<!ELEMENT horizontal (#PCDATA)>
<!ATTLIST horizontal type (absolute|relative|sequence) "absolute">

<!ELEMENT bullet (direction?, speed?, (action | actionRef)*)>
<!ATTLIST bullet label CDATA #IMPLIED>

<!ELEMENT direction (#PCDATA)>
<!ATTLIST direction type (aim|absolute|relative|sequence) "aim">

<!ELEMENT changeSpeed (speed, term)>

<!ELEMENT fire (direction?, speed?, (bullet | bulletRef))>
<!ATTLIST fire label CDATA #IMPLIED>

<!ELEMENT bulletRef (param*)>
<!ATTLIST bulletRef label CDATA #REQUIRED>